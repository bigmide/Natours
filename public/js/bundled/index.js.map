{"mappings":"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","sources":["public/js/alert.js","public/js/login.js","public/js/mapbox.js","public/js/updateSettings.js","public/js/stripe.js","public/js/index.js"],"sourcesContent":["/* eslint-disable */\n\nexport const hideAlert = () => {\n  const el = document.querySelector('.alert');\n  if (el) el.parentElement.removeChild(el);\n};\n\nexport const showAlert = (type, msg) => {\n  hideAlert();\n  const markup = `<div class=\"alert alert--${type}\">${msg}</div>`;\n  document.querySelector('body').insertAdjacentHTML('afterbegin', markup);\n  window.setTimeout(hideAlert, 5000);\n};\n","/* eslint-disable */\n\nimport axios from 'axios';\nimport { showAlert } from './alert';\n\nexport const login = async (email, password) => {\n  try {\n    const res = await axios({\n      method: 'POST',\n      url: '/api/v1/users/login',\n      data: {\n        email,\n        password,\n      },\n    });\n\n    if (res.data.status === 'success') {\n      showAlert('success', 'Logged In Successfully!');\n      window.setTimeout(() => {\n        location.assign('/');\n      }, 1500);\n    }\n  } catch (err) {\n    showAlert('error', err.response.data.message);\n  }\n};\n\nexport const logout = async () => {\n  try {\n    const res = await axios({\n      method: 'GET',\n      url: '/api/v1/users/logout',\n    });\n    if (res.data.status === 'success') location.assign('/'); //.reload(true);\n  } catch (error) {\n    showAlert('error', 'Error logging out. try again!!');\n  }\n};\n","/* eslint-disable */\n\nexport const displayMap = (locations) => {\n  mapboxgl.accessToken =\n    'pk.eyJ1IjoiYmlnbWlkZSIsImEiOiJjbGVoZnB2cWswZjBvM29td2N1c3g0Z2g2In0.CszOZ3hDjN_1MBv8gam4rQ';\n  var map = new mapboxgl.Map({\n    container: 'map',\n    style: 'mapbox://styles/bigmide/clemshtzb000b01mrm9pdq9o3',\n    scrollZoom: false,\n    // center: [-118.113491, 34.111745],\n    // zoom: 10,\n    // interactive: false,\n  });\n\n  const bounds = new mapboxgl.LngLatBounds();\n\n  locations.forEach((loc) => {\n    const el = document.createElement('div');\n    el.className = 'marker';\n\n    new mapboxgl.Marker({\n      element: el,\n      anchor: 'bottom',\n    })\n      .setLngLat(loc.coordinates)\n      .addTo(map);\n\n    new mapboxgl.Popup({ offset: 30 })\n      .setLngLat(loc.coordinates)\n      .setHTML(`<p>Day ${loc.day}: ${loc.description}</p>`)\n      .addTo(map);\n\n    bounds.extend(loc.coordinates);\n  });\n\n  map.fitBounds(bounds, {\n    padding: {\n      top: 200,\n      bottom: 150,\n      left: 100,\n      right: 100,\n    },\n  });\n};\n","/* eslint-disable */\n\nimport axios from 'axios';\nimport { showAlert } from './alert';\n\nexport const updateSettings = async (data, type) => {\n  try {\n    const url =\n      type === 'data'\n        ? '/api/v1/users/update-me'\n        : '/api/v1/users/update-my-password';\n    const res = await axios({\n      url,\n      method: 'PATCH',\n      data,\n    });\n\n    if (res.data.status === 'success') {\n      showAlert('success', 'Data Updated Successfully');\n      location.reload(true);\n    }\n  } catch (err) {\n    showAlert('error', err.response.data.message);\n  }\n};\n","/* eslint-disable */\n\nimport axios from 'axios';\nimport { showAlert } from './alert';\n\nconst stripe = Stripe(\n  'pk_test_51MifAzKq2KQrOs2gYXh8043X4Qhm7kl3dUp6pd7t4EzdbBqcuyNNyu0dUAq7r4VF5uHQvVYnIWKKfzbiIYRjq4NJ00kXo4Awab'\n);\n\nexport const bookTour = async (tourId) => {\n  try {\n    const session = await axios(`/api/v1/bookings/checkout-session/${tourId}`);\n    // console.log(session);\n    location.assign(session.data.session.url);\n  } catch (err) {\n    showAlert('error', err);\n  }\n};\n","/* eslint-disable */\n// import 'core-js/stable';\n// import 'regenerator-runtime/runtime';\nimport { login, logout } from './login';\nimport { displayMap } from './mapbox';\nimport { updateSettings } from './updateSettings';\nimport { bookTour } from './stripe';\n\nconst mapBox = document.getElementById('map');\nconst loginForm = document.querySelector('.form--login');\nconst logoutBtn = document.querySelector('.nav__el--logout');\nconst userDataForm = document.querySelector('.form-user-data');\nconst userPasswordForm = document.querySelector('.form-user-password');\nconst bookBtn = document.getElementById('book-tour');\n\nif (mapBox) {\n  const locations = JSON.parse(\n    document.getElementById('map').dataset.locations\n  );\n  displayMap(locations);\n}\n\nif (loginForm)\n  loginForm.addEventListener('submit', function (e) {\n    e.preventDefault();\n    const email = document.getElementById('email').value;\n    const password = document.getElementById('password').value;\n    login(email, password);\n  });\n\nif (logoutBtn) logoutBtn.addEventListener('click', logout);\n\nif (userDataForm)\n  userDataForm.addEventListener('submit', function (e) {\n    e.preventDefault();\n    const form = new FormData();\n    form.append('name', document.getElementById('name').value);\n    form.append('email', document.getElementById('email').value);\n    form.append('photo', document.getElementById('photo').files[0]);\n\n    updateSettings(form, 'data');\n  });\n\nif (userPasswordForm)\n  userPasswordForm.addEventListener('submit', async function (e) {\n    e.preventDefault();\n    document.querySelector('.btn--save-password').textContent = 'Updating...';\n\n    const passwordCurrent = document.getElementById('password-current').value;\n    const password = document.getElementById('password').value;\n    const passwordConfirm = document.getElementById('password-confirm').value;\n    await updateSettings(\n      { passwordCurrent, password, passwordConfirm },\n      'password'\n    );\n\n    document.querySelector('.btn--save-password').textContent = 'Save password';\n\n    document.getElementById('password-current').value = '';\n    document.getElementById('password').value = '';\n    document.getElementById('password-confirm').value = '';\n  });\n\nif (bookBtn)\n  bookBtn.addEventListener('click', function (e) {\n    e.target.textContent = 'Processing...';\n    const { tourId } = e.target.dataset;\n    bookTour(tourId);\n  });\n"],"names":["$e9c91518574fdb31$export$516836c6a9dfc573","el","document","querySelector","parentElement","removeChild","$e9c91518574fdb31$export$de026b00723010c1","type","msg","markup","insertAdjacentHTML","window","setTimeout","$bf5b431e6a69fea8$export$596d806903d1f59e","async","email","password","$parcel$interopDefault","$cnf0l$axios","method","url","data","status","location","assign","err","response","message","$3c4e158d14605c12$export$4c5dd147b21b9176","locations","mapboxgl","accessToken","map","Map","container","style","scrollZoom","bounds","LngLatBounds","forEach","loc","createElement","className","Marker","element","anchor","setLngLat","coordinates","addTo","Popup","offset","setHTML","day","description","extend","fitBounds","padding","top","bottom","left","right","$955535ce7513e32c$export$f558026a994b6051","reload","$9fd71c92b6f885af$export$8d5bdbf26681c0c2","Stripe","tourId","session","$407eccdc61ba7a94$var$mapBox","getElementById","$407eccdc61ba7a94$var$loginForm","$407eccdc61ba7a94$var$logoutBtn","$407eccdc61ba7a94$var$userDataForm","$407eccdc61ba7a94$var$userPasswordForm","$407eccdc61ba7a94$var$bookBtn","JSON","parse","dataset","addEventListener","e","preventDefault","value","error","form","FormData","append","files","textContent","passwordCurrent","passwordConfirm","target"],"version":3,"file":"index.js.map","sourceRoot":"../../../"}